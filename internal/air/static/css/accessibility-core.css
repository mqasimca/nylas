/* Accessibility Core - Skip links, focus, contrast, reduced motion */

/* Skip Navigation Link */
.skip-link {
    position: absolute;
    top: -100%;
    left: 50%;
    transform: translateX(-50%);
    padding: 12px 24px;
    background: var(--accent);
    color: white;
    font-size: 14px;
    font-weight: 600;
    text-decoration: none;
    border-radius: 0 0 12px 12px;
    z-index: 9999;
    transition: top 0.2s ease;
    box-shadow: var(--shadow-lg);
}

.skip-link:focus {
    top: 0;
    outline: none;
}

/* Focus Visible Styles - Enhanced Focus Rings */
:focus {
    outline: none;
}

:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
    border-radius: 4px;
}

/* Specific Focus Styles */
.nav-tab:focus-visible {
    outline-offset: 4px;
    border-radius: 8px;
}

.folder-item:focus-visible {
    outline-offset: -2px;
    border-radius: 10px;
    background: var(--bg-hover);
}

.email-item:focus-visible {
    outline-offset: -2px;
    border-radius: 0;
    position: relative;
    z-index: 1;
}

.compose-btn:focus-visible {
    outline-offset: 2px;
    border-radius: 14px;
}

.settings-btn:focus-visible,
.search-trigger:focus-visible,
.account-switcher:focus-visible {
    outline-offset: 2px;
    border-radius: 10px;
}

/* Button Focus States */
button:focus-visible,
[role="button"]:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
}

/* Input Focus States */
input:focus-visible,
textarea:focus-visible,
[contenteditable="true"]:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 0;
    border-color: var(--accent) !important;
}

/* Modal Focus Trap Indicator */
.settings-modal:focus-visible,
.command-palette:focus-visible,
.compose-modal:focus-visible {
    outline: none;
}

/* High Contrast Mode Support */
@media (prefers-contrast: high) {
    :focus-visible {
        outline-width: 3px;
        outline-style: solid;
    }

    .email-item.selected {
        border: 2px solid var(--text-primary);
    }

    .nav-tab.active {
        border-bottom: 3px solid var(--accent);
    }
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }

    .skip-link {
        transition: none;
    }
}

/* Screen Reader Only Content */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

.sr-only-focusable:focus,
.sr-only-focusable:active {
    position: static;
    width: auto;
    height: auto;
    padding: inherit;
    margin: inherit;
    overflow: visible;
    clip: auto;
    white-space: normal;
}

/* Live Region for Announcements */
.live-region {
    position: absolute;
    left: -10000px;
    width: 1px;
    height: 1px;
    overflow: hidden;
}

/* Focus Indicator for Lists */
.email-list:focus-within {
    outline: none;
}

.email-list:focus-within .email-item.focused {
    background: var(--bg-hover);
    box-shadow: inset 3px 0 0 var(--accent);
}

/* Keyboard Navigation Indicator */
[data-keyboard-nav="true"] .email-item:focus {
    background: var(--bg-hover);
}

/* Tab Navigation */
[role="tablist"] {
    display: flex;
    gap: 4px;
}

[role="tab"] {
    cursor: pointer;
}

[role="tab"][aria-selected="true"] {
    font-weight: 600;
}

[role="tabpanel"] {
    outline: none;
}

[role="tabpanel"]:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: -2px;
}

/* Interactive Element Minimum Size (WCAG 2.5.8) - Only on touch devices */
@media (pointer: coarse) {
    .action-btn,
    .hover-action-btn {
        min-height: 44px;
        min-width: 44px;
    }
}

/* Status Indicators with Patterns */
.avatar-status {
    border-width: 3px;
}

.avatar-status.away {
    border-style: dashed;
}

.avatar-status.offline {
    border-style: dotted;
}

/* Error States */
.error-message {
    color: #ef4444;
    font-weight: 500;
}

.error-message::before {
    content: 'âš  ';
}

/* Loading States - Accessible */
.loading-spinner {
    animation: spin 1s linear infinite;
}

@media (prefers-reduced-motion: reduce) {
    .loading-spinner {
        animation: none;
    }

    .loading-spinner::after {
        content: 'Loading...';
    }
}

/* Focus within for compound components */
.email-item:focus-within {
    background: var(--bg-hover);
}

/* Visible focus for custom checkboxes/radios */
.settings-option input:focus-visible + .option-content {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
}

.toggle-switch input:focus-visible + .toggle-slider {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
}

/* Theme Selection Focus */
.theme-btn:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
}

.color-option:focus-visible {
    outline: 2px solid var(--text-primary);
    outline-offset: 4px;
}
